<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dev's Smart Reader (Fixed)</title>
    <style>
        body { margin: 0; background: #fdf6e3; color: #333; font-family: 'Georgia', serif; line-height: 1.8; padding-bottom: 50vh; }
        
        /* рк╣рлЗркбрк░ */
        header { position: fixed; top: 0; left: 0; width: 100%; background: #002b36; color: #eee; padding: 15px; z-index: 1000; display: flex; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        h2 { margin: 0; font-size: 16px; flex-grow: 1; }
        
        /* рк╕рлНркЯрлЗркЯрк╕ ркмрлЗркЬ (ркирк╛ркирлБркВ рк▓рк╛ркИркЯ) */
        #status-indicator { width: 15px; height: 15px; border-radius: 50%; background: #ccc; margin-right: 15px; border: 2px solid #fff; }

        /* ркХрлЗркорлЗрк░рк╛ркирлЗ ркЖрккркгрлЗ ркЫрлБрккрк╛рк╡рлА ркжркИрк╢рлБркВ рккркг ркЪрк╛рк▓рлБ рк░рк╛ркЦрлАрк╢рлБркВ */
        #cam-preview { 
            position: fixed; top: 0; left: 0; 
            width: 1px; height: 1px; 
            opacity: 0; pointer-events: none; z-index: -1; 
        }
        
        /* рк▓ркЦрк╛ркг ркорк╛ркЯрлЗ ркЬркЧрлНркпрк╛ */
        .content { margin-top: 80px; padding: 20px; max-width: 800px; margin-left: auto; margin-right: auto; }
        .verse { background: #fff; padding: 20px; margin-bottom: 20px; border-left: 5px solid #b58900; box-shadow: 0 2px 4px rgba(0,0,0,0.1); border-radius: 5px; }
        .verse-title { font-weight: bold; color: #b58900; margin-bottom: 5px; font-size: 1.2em; }
        
        .hint { text-align: center; color: #666; font-size: 0.9em; margin-bottom: 20px; background: #eee; padding: 5px; border-radius: 5px; }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js" crossorigin="anonymous"></script>
</head>
<body>

    <header>
        <div id="status-indicator"></div>
        <h2>Smart Reader ЁЯУЦ</h2>
    </header>

    <video id="cam-preview" playsinline></video>

    <div class="content">
        <div class="hint">
            ЁЯТб <b>ркХрлЗрк╡рлА рк░рлАркдрлЗ рк╡рк╛рккрк░рк╡рлБркВ:</b><br>
            рклрлЛрки рк╕рк╛ркорлЗ рк░рк╛ркЦрлЛ. ркорк╛ркерлБркВ <b>ркирлАркЪрлЗ</b> ркХрк░рлЛ ркдрлЛ рк▓ркЦрк╛ркг ркЙрккрк░ ркЬрк╢рлЗ (Scroll Down).<br>
            ркорк╛ркерлБркВ <b>ркЙрккрк░</b> ркХрк░рлЛ ркдрлЛ рк▓ркЦрк╛ркг ркирлАркЪрлЗ ркЬрк╢рлЗ (Scroll Up).
        </div>

        <div class="verse">
            <div class="verse-title">рк╢рлНрк▓рлЛркХ рлз</div>
            <p>ркзрлГркдрк░рк╛рк╖рлНркЯрлНрк░ ркЙрк╡рк╛ркЪ |<br>
            ркзрк░рлНркоркХрлНрк╖рлЗркдрлНрк░рлЗ ркХрлБрк░рлБркХрлНрк╖рлЗркдрлНрк░рлЗ рк╕ркорк╡рлЗркдрк╛ ркпрлБркпрлБркдрлНрк╕рк╡ркГ |<br>
            ркорк╛ркоркХрк╛ркГ рккрк╛ркгрлНркбрк╡рк╛рк╢рлНркЪрлИрк╡ ркХрк┐ркоркХрлБрк░рлНрк╡ркд рк╕ркЮрлНркЬркп ||1||</p>
            <p>ркнрк╛рк╡рк╛рк░рлНрке: ркзрлГркдрк░рк╛рк╖рлНркЯрлНрк░ ркмрлЛрк▓рлНркпрк╛: рк╣рлЗ рк╕ркВркЬркп! ркзрк░рлНркоркнрлВркорк┐ ркХрлБрк░рлБркХрлНрк╖рлЗркдрлНрк░ркорк╛ркВ ркПркХркарк╛ ркеркпрлЗрк▓рк╛ ркпрлБркжрлНркзркирлА ркИркЪрлНркЫрк╛рк╡рк╛рк│рк╛ ркорк╛рк░рк╛ ркЕркирлЗ рккрк╛ркВркбрлБркирк╛ рккрлБркдрлНрк░рлЛркП рк╢рлБркВ ркХрк░рлНркпрлБркВ?</p>
        </div>

        <div class="verse">
            <div class="verse-title">рк╢рлНрк▓рлЛркХ рли</div>
            <p>рк╕ркЮрлНркЬркп ркЙрк╡рк╛ркЪ |<br>
            ркжрлГрк╖рлНркЯрлНрк╡рк╛ ркдрлБ рккрк╛ркгрлНркбрк╡рк╛ркирлАркХркВ рк╡рлНркпрлВрквркВ ркжрлБрк░рлНркпрлЛркзркирк╕рлНркдркжрк╛ |<br>
            ркЖркЪрк╛рк░рлНркпркорлБрккрк╕ркЩрлНркЧркорлНркп рк░рк╛ркЬрк╛ рк╡ркЪркиркоркмрлНрк░рк╡рлАркд ||2||</p>
            <p>ркнрк╛рк╡рк╛рк░рлНрке: рк╕ркВркЬркп ркмрлЛрк▓рлНркпрк╛: ркдрлЗ рк╕ркоркпрлЗ рк░рк╛ркЬрк╛ ркжрлБрк░рлНркпрлЛркзркирлЗ рккрк╛ркВркбрк╡рлЛркирлА рк╕рлЗркирк╛ркирлЗ рк╡рлНркпрлВрк╣рк░ркЪркирк╛ркорк╛ркВ ркКркнрлЗрк▓рлА ркЬрлЛркИркирлЗ ркжрлНрк░рлЛркгрк╛ркЪрк╛рк░рлНркп рккрк╛рк╕рлЗ ркЬркИркирлЗ ркЖ рк╡ркЪрки ркХрк╣рлНркпрлБркВ.</p>
        </div>

        <div class="verse"><div class="verse-title">рк╢рлНрк▓рлЛркХ рлй</div><p>рккрк╢рлНркпрлИркдрк╛ркВ рккрк╛ркгрлНркбрлБрккрлБркдрлНрк░рк╛ркгрк╛ркорк╛ркЪрк╛рк░рлНркп ркорк╣ркдрлАркВ ркЪркорлВркорлН |<br>рк╡рлНркпрлВркврк╛ркВ ркжрлНрк░рлБрккркжрккрлБркдрлНрк░рлЗркг ркдрк╡ рк╢рк┐рк╖рлНркпрлЗркг ркзрлАркоркдрк╛ ||3||</p></div>
        <div class="verse"><div class="verse-title">рк╢рлНрк▓рлЛркХ рлк</div><p>ркЕркдрлНрк░ рк╢рлВрк░рк╛ ркорк╣рлЗрк╖рлНрк╡рк╛рк╕рк╛ ркнрлАркорк╛рк░рлНркЬрлБркирк╕ркорк╛ ркпрлБркзрк┐ |<br>ркпрлБркпрлБркзрк╛ркирлЛ рк╡рк┐рк░рк╛ркЯрк╢рлНркЪ ркжрлНрк░рлБрккркжрк╢рлНркЪ ркорк╣рк╛рк░ркеркГ ||4||</p></div>
        <div class="verse"><div class="verse-title">рк╢рлНрк▓рлЛркХ рлл</div><p>ркзрлГрк╖рлНркЯркХрлЗркдрлБрк╢рлНркЪрлЗркХрк┐ркдрк╛ркиркГ ркХрк╛рк╢рлАрк░рк╛ркЬрк╢рлНркЪ рк╡рлАрк░рлНркпрк╡рк╛ркирлН |<br>рккрлБрк░рлБркЬрк┐ркдрлНркХрлБркВркдрк┐ркнрлЛркЬрк╢рлНркЪ рк╢рлИркмрлНркпрк╢рлНркЪ ркирк░рккрлБркЩрлНркЧрк╡ркГ ||5||</p></div>
        <div class="verse"><div class="verse-title">рк╢рлНрк▓рлЛркХ рлм</div><p>ркпрлБркзрк╛ркоркирлНркпрлБрк╢рлНркЪ рк╡рк┐ркХрлНрк░рк╛ркирлНркд ркЙркдрлНркдркорлМркЬрк╛рк╢рлНркЪ рк╡рлАрк░рлНркпрк╡рк╛ркирлН |<br>рк╕рлМркнркжрлНрк░рлЛ ркжрлНрк░рлМрккркжрлЗркпрк╛рк╢рлНркЪ рк╕рк░рлНрк╡ ркПрк╡ ркорк╣рк╛рк░ркерк╛ркГ ||6||</p></div>
        <div class="verse"><div class="verse-title">рк╢рлНрк▓рлЛркХ рлн</div><p>ркЕрк╕рлНркорк╛ркХркВ ркдрлБ рк╡рк┐рк╢рк┐рк╖рлНркЯрк╛ ркпрлЗ ркдрк╛ркирлНркирк┐ркмрлЛркз ркжрлНрк╡рк┐ркЬрлЛркдрлНркдрко |<br>ркирк╛ркпркХрк╛ ркорко рк╕рлИркирлНркпрк╕рлНркп рк╕ркВркЬрлНркЮрк╛рк░рлНркеркВ ркдрк╛ркирлНркмрлНрк░рк╡рлАркорк┐ ркдрлЗ ||7||</p></div>
        <div class="verse"><div class="verse-title">рк╢рлНрк▓рлЛркХ рло</div><p>ркнрк╡рк╛ркиркнрлАрк╖рлНркорк╢рлНркЪ ркХрк░рлНркгрк╢рлНркЪ ркХрлГрккрк╢рлНркЪ рк╕ркорк┐ркдрк┐ркЮрлНркЬркпркГ |<br>ркЕрк╢рлНрк╡ркдрлНркерк╛ркорк╛ рк╡рк┐ркХрк░рлНркгрк╢рлНркЪ рк╕рлМркоркжркдрлНркдрк┐рк╕рлНркдркерлИрк╡ ркЪ ||8||</p></div>
        <div class="verse"><div class="verse-title">рк╢рлНрк▓рлЛркХ рлп</div><p>ркЕркирлНркпрлЗ ркЪ ркмрк╣рк╡ркГ рк╢рлВрк░рк╛ ркоркжрк░рлНркерлЗ ркдрлНркпркХрлНркдркЬрлАрк╡рк┐ркдрк╛ркГ |<br>ркирк╛ркирк╛рк╢рк╕рлНркдрлНрк░рккрлНрк░рк╣рк░ркгрк╛ркГ рк╕рк░рлНрк╡рлЗ ркпрлБркжрлНркзрк╡рк┐рк╢рк╛рк░ркжрк╛ркГ ||9||</p></div>
        
        <p style="text-align:center; color:#999;">-- ркЕркзрлНркпрк╛ркп рк╕ркорк╛рккрлНркд --</p>
    </div>

    <script>
        const videoElement = document.getElementById('cam-preview');
        const indicator = document.getElementById('status-indicator');
        
        function onResults(results) {
            if (results.multiFaceLandmarks && results.multiFaceLandmarks.length > 0) {
                const landmarks = results.multiFaceLandmarks[0];
                
                // Nose Tip (ID 1)
                const noseTip = landmarks[1];
                const y = noseTip.y;

                // Thresholds
                if (y > 0.60) { // Head Down -> Scroll Down
                    indicator.style.background = "#00ff00"; // Green Light
                    window.scrollBy({ top: 15, behavior: 'smooth' }); 
                } 
                else if (y < 0.40) { // Head Up -> Scroll Up
                    indicator.style.background = "#00ccff"; // Blue Light
                    window.scrollBy({ top: -15, behavior: 'smooth' });
                } 
                else {
                    indicator.style.background = "#ffff00"; // Yellow (Standby)
                }
            } else {
                indicator.style.background = "#ff0000"; // Red (No Face)
            }
        }

        const faceMesh = new FaceMesh({locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`});
        
        faceMesh.setOptions({
            maxNumFaces: 1,
            refineLandmarks: false,
            minDetectionConfidence: 0.5,
            minTrackingConfidence: 0.5
        });

        faceMesh.onResults(onResults);

        const camera = new Camera(videoElement, {
            onFrame: async () => await faceMesh.send({image: videoElement}),
            width: 320, height: 240
        });
        camera.start();
    </script>
</body>
</html>
