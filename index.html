<!DOCTYPE html>
<html lang="gu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dev's Smart Reader</title>
    <style>
        body { margin: 0; background: #fdf6e3; color: #333; font-family: 'Georgia', serif; line-height: 1.8; transition: background 0.3s; }
        
        /* Header */
        header { position: fixed; top: 0; left: 0; width: 100%; background: #002b36; color: #eee; padding: 10px; z-index: 100; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        h2 { margin: 0; font-size: 18px; padding-left: 10px; }
        
        /* Status Indicator */
        #status-badge { background: #dc322f; color: white; padding: 5px 10px; border-radius: 15px; font-size: 12px; font-weight: bold; margin-right: 10px; transition: background 0.3s; }
        
        /* Camera Preview (Small & Corner) */
        #cam-preview { position: fixed; top: 60px; right: 10px; width: 80px; height: 60px; border-radius: 5px; opacity: 0.8; transform: scaleX(-1); border: 2px solid #002b36; z-index: 99; }
        
        /* Content Area */
        .content { margin-top: 80px; padding: 20px; max-width: 800px; margin-left: auto; margin-right: auto; }
        .verse { background: #fff; padding: 20px; margin-bottom: 20px; border-left: 5px solid #b58900; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .verse-title { font-weight: bold; color: #b58900; margin-bottom: 5px; }
        
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js" crossorigin="anonymous"></script>
</head>
<body>

    <header>
        <h2>Smart Reader ЁЯУЦ</h2>
        <div id="status-badge">OFFLINE</div>
    </header>

    <video id="cam-preview" playsinline></video>

    <div class="content">
        <h1>рк╢рлНрк░рлАркоркж ркнркЧрк╡ркж ркЧрлАркдрк╛ - ркЕркзрлНркпрк╛ркп рлз</h1>
        <p><i>(ркорк╛ркерлБркВ рк╕рк╣рлЗркЬ ркирлАркЪрлЗ ркХрк░рлЛ ркдрлЛ ркЖркЧрк│ рк╡ркВркЪрк╛рк╢рлЗ, ркЙрккрк░ ркХрк░рлЛ ркдрлЛ рккрк╛ркЫрк│ ркЬрк╢рлЗ)</i></p>
        
        <div class="verse">
            <div class="verse-title">рк╢рлНрк▓рлЛркХ рлз</div>
            <p>ркзрлГркдрк░рк╛рк╖рлНркЯрлНрк░ ркЙрк╡рк╛ркЪ |<br>
            ркзрк░рлНркоркХрлНрк╖рлЗркдрлНрк░рлЗ ркХрлБрк░рлБркХрлНрк╖рлЗркдрлНрк░рлЗ рк╕ркорк╡рлЗркдрк╛ ркпрлБркпрлБркдрлНрк╕рк╡ркГ |<br>
            ркорк╛ркоркХрк╛ркГ рккрк╛ркгрлНркбрк╡рк╛рк╢рлНркЪрлИрк╡ ркХрк┐ркоркХрлБрк░рлНрк╡ркд рк╕ркЮрлНркЬркп ||1||</p>
            <p>ркнрк╛рк╡рк╛рк░рлНрке: ркзрлГркдрк░рк╛рк╖рлНркЯрлНрк░ ркмрлЛрк▓рлНркпрк╛: рк╣рлЗ рк╕ркВркЬркп! ркзрк░рлНркоркнрлВркорк┐ ркХрлБрк░рлБркХрлНрк╖рлЗркдрлНрк░ркорк╛ркВ ркПркХркарк╛ ркеркпрлЗрк▓рк╛ ркпрлБркжрлНркзркирлА ркИркЪрлНркЫрк╛рк╡рк╛рк│рк╛ ркорк╛рк░рк╛ ркЕркирлЗ рккрк╛ркВркбрлБркирк╛ рккрлБркдрлНрк░рлЛркП рк╢рлБркВ ркХрк░рлНркпрлБркВ?</p>
        </div>

        <div class="verse">
            <div class="verse-title">рк╢рлНрк▓рлЛркХ рли</div>
            <p>рк╕ркЮрлНркЬркп ркЙрк╡рк╛ркЪ |<br>
            ркжрлГрк╖рлНркЯрлНрк╡рк╛ ркдрлБ рккрк╛ркгрлНркбрк╡рк╛ркирлАркХркВ рк╡рлНркпрлВрквркВ ркжрлБрк░рлНркпрлЛркзркирк╕рлНркдркжрк╛ |<br>
            ркЖркЪрк╛рк░рлНркпркорлБрккрк╕ркЩрлНркЧркорлНркп рк░рк╛ркЬрк╛ рк╡ркЪркиркоркмрлНрк░рк╡рлАркд ||2||</p>
            <p>ркнрк╛рк╡рк╛рк░рлНрке: рк╕ркВркЬркп ркмрлЛрк▓рлНркпрк╛: ркдрлЗ рк╕ркоркпрлЗ рк░рк╛ркЬрк╛ ркжрлБрк░рлНркпрлЛркзркирлЗ рккрк╛ркВркбрк╡рлЛркирлА рк╕рлЗркирк╛ркирлЗ рк╡рлНркпрлВрк╣рк░ркЪркирк╛ркорк╛ркВ ркКркнрлЗрк▓рлА ркЬрлЛркИркирлЗ ркжрлНрк░рлЛркгрк╛ркЪрк╛рк░рлНркп рккрк╛рк╕рлЗ ркЬркИркирлЗ ркЖ рк╡ркЪрки ркХрк╣рлНркпрлБркВ.</p>
        </div>

        <div class="verse"><div class="verse-title">ркирлЛркВркз</div><p>ркЖ ркПркХ ркбрлЗркорлЛ ркЯрлЗркХрлНрк╕рлНркЯ ркЫрлЗ ркЬрлЗркерлА ркдркорлЗ рк╕рлНркХрлНрк░рлЛрк▓рк┐ркВркЧ ркЯрлЗрк╕рлНркЯ ркХрк░рлА рк╢ркХрлЛ...</p></div>
        <div class="verse"><div class="verse-title">ркЯрлЗрк╕рлНркЯ рлз</div><p>рк╕рлНркХрлНрк░рлЛрк▓рк┐ркВркЧ ркЪркХрк╛рк╕рк╡рк╛ ркорк╛ркЯрлЗ рк╡ркзрлБ рк▓ркЦрк╛ркг...</p></div>
        <div class="verse"><div class="verse-title">ркЯрлЗрк╕рлНркЯ рли</div><p>рк╕рлНркХрлНрк░рлЛрк▓рк┐ркВркЧ ркЪркХрк╛рк╕рк╡рк╛ ркорк╛ркЯрлЗ рк╡ркзрлБ рк▓ркЦрк╛ркг...</p></div>
        <div class="verse"><div class="verse-title">ркЯрлЗрк╕рлНркЯ рлй</div><p>рк╕рлНркХрлНрк░рлЛрк▓рк┐ркВркЧ ркЪркХрк╛рк╕рк╡рк╛ ркорк╛ркЯрлЗ рк╡ркзрлБ рк▓ркЦрк╛ркг...</p></div>
        <div class="verse"><div class="verse-title">ркЯрлЗрк╕рлНркЯ рлк</div><p>рк╕рлНркХрлНрк░рлЛрк▓рк┐ркВркЧ ркЪркХрк╛рк╕рк╡рк╛ ркорк╛ркЯрлЗ рк╡ркзрлБ рк▓ркЦрк╛ркг...</p></div>
        <div class="verse"><div class="verse-title">ркЯрлЗрк╕рлНркЯ рлл</div><p>рк╕рлНркХрлНрк░рлЛрк▓рк┐ркВркЧ ркЪркХрк╛рк╕рк╡рк╛ ркорк╛ркЯрлЗ рк╡ркзрлБ рк▓ркЦрк╛ркг...</p></div>
        <div class="verse"><div class="verse-title">ркЯрлЗрк╕рлНркЯ рлм</div><p>рк╕рлНркХрлНрк░рлЛрк▓рк┐ркВркЧ ркЪркХрк╛рк╕рк╡рк╛ ркорк╛ркЯрлЗ рк╡ркзрлБ рк▓ркЦрк╛ркг...</p></div>
    </div>

    <script>
        const videoElement = document.getElementById('cam-preview');
        const statusBadge = document.getElementById('status-badge');
        let isScrolling = false;

        function onResults(results) {
            if (results.multiFaceLandmarks && results.multiFaceLandmarks.length > 0) {
                const landmarks = results.multiFaceLandmarks[0];
                
                // Nose Tip (1)
                const noseTip = landmarks[1];
                const y = noseTip.y;

                // Thresholds (ркдркорк╛рк░рк╛ ркЪрк╣рлЗрк░рк╛ ркорлБркЬркм ркПркбркЬрк╕рлНркЯ ркХрк░рлА рк╢ркХрк╛ркп)
                // Center ~ 0.5
                
                if (y > 0.65) { // Head Down
                    statusBadge.innerText = "SCROLL DOWN тЦ╝";
                    statusBadge.style.background = "#2aa198"; // Cyan/Green
                    window.scrollBy({ top: 10, behavior: 'smooth' }); // Smooth scroll
                } 
                else if (y < 0.45) { // Head Up
                    statusBadge.innerText = "SCROLL UP тЦ▓";
                    statusBadge.style.background = "#268bd2"; // Blue
                    window.scrollBy({ top: -10, behavior: 'smooth' });
                } 
                else {
                    statusBadge.innerText = "READING MODE";
                    statusBadge.style.background = "#859900"; // Green
                }
            } else {
                statusBadge.innerText = "NO FACE DETECTED";
                statusBadge.style.background = "#dc322f"; // Red
            }
        }

        const faceMesh = new FaceMesh({locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`});
        
        faceMesh.setOptions({
            maxNumFaces: 1,
            refineLandmarks: false,
            minDetectionConfidence: 0.5,
            minTrackingConfidence: 0.5
        });

        faceMesh.onResults(onResults);

        const camera = new Camera(videoElement, {
            onFrame: async () => await faceMesh.send({image: videoElement}),
            width: 320, height: 240
        });
        camera.start();
    </script>
</body>
</html>
